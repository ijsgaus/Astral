{
  "name": "sample.service",
  "version": "0.5",
  "endpoints": {
    "awesome.event": {
      "$type": "event",
      "event": {
        "$type": "objectHierarchy",
        "rootTypeReference": "SampleEvent",
        "members": [
          {
            "name": "sample.event2",
            "typeReference": "SampleEvent2",
            "version": "0.5",
            "title": "SampleEvent2"
          },
          {
            "name": "sample.event",
            "typeReference": "SampleEvent",
            "version": "0.5",
            "title": "SampleEvent"
          }
        ],
        "title": "SampleEvent"
      },
      "title": "AwesomeEvent",
      "rabbitmq": {
        "exchange": "topic.exchange",
        "exchangeType": "fanout"
      }
    },
    "order.change": {
      "$type": "command",
      "command": {
        "$type": "objectType",
        "name": "sample.command",
        "typeReference": "SampleCommand",
        "version": "0.5",
        "title": "SampleCommand"
      },
      "title": "OrderChange",
      "rabbitmq": {
        "routingKey": "special.routing.key"
      }
    },
    "an.array": {
      "$type": "event",
      "event": {
        "$type": "arrayType",
        "element": {
          "code": "int32",
          "title": null
        },
        "title": "Int32[]"
      },
      "title": "AnArray"
    }
  },
  "contracts": {
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "Container",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "SampleEvent",
      "SampleCommand"
    ],
    "properties": {
      "SampleEvent": {
        "oneOf": [
          {
            "$ref": "#/definitions/SampleEvent"
          }
        ]
      },
      "SampleCommand": {
        "oneOf": [
          {
            "$ref": "#/definitions/SampleCommand"
          }
        ]
      }
    },
    "definitions": {
      "SampleEvent": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "Id": {
            "type": "integer",
            "format": "int32"
          },
          "Name": {
            "type": [
              "null",
              "string"
            ]
          },
          "Order": {
            "oneOf": [
              {
                "$ref": "#/definitions/SampleEnum"
              }
            ]
          }
        },
        "contractName": "sample.event",
        "contractVersion": "0.5"
      },
      "SampleEnum": {
        "type": "integer",
        "description": "",
        "x-enumNames": [
          "First",
          "Second",
          "Third"
        ],
        "enum": [
          0,
          1,
          2
        ]
      },
      "SampleEvent2": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "IsGood": {
            "type": "boolean"
          }
        },
        "allOf": [
          {
            "$ref": "#/definitions/SampleEvent"
          }
        ],
        "contractName": "sample.event2",
        "contractVersion": "0.5"
      },
      "SampleCommand": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "OrderId": {
            "type": "integer",
            "format": "int32"
          },
          "Operation": {
            "oneOf": [
              {
                "$ref": "#/definitions/Operation"
              }
            ]
          },
          "Good": {
            "oneOf": [
              {
                "$ref": "#/definitions/Good"
              },
              {
                "type": "null"
              }
            ]
          },
          "Sample": {
            "oneOf": [
              {
                "$ref": "#/definitions/SampleEnum"
              }
            ]
          }
        },
        "contractName": "sample.command",
        "contractVersion": "0.5"
      },
      "Operation": {
        "type": "integer",
        "description": "",
        "x-enumNames": [
          "Add",
          "Remove"
        ],
        "enum": [
          0,
          1
        ]
      },
      "Good": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "GoodId": {
            "type": "integer",
            "format": "int32"
          },
          "GoodName": {
            "type": [
              "null",
              "string"
            ]
          }
        }
      }
    }
  },
  "title": "ISampleService",
  "rabbitmq": {
    "exchangeType": "topic"
  }
}